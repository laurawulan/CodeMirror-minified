'use strict';(function(b){"object"==typeof exports&&"object"==typeof module?b(require("codemirror/lib/codemirror")):"function"==typeof define&&define.amd?define(["codemirror/lib/codemirror"],b):b(CodeMirror)})(function(b){b.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(f,d){return/^[;{}]$/.test(d)}});b.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(f,d,c,a){return this.jsonMode?/^[\[,{]$/.test(d)||/^}/.test(c):";"==d&&a.lexical&&
")"==a.lexical.type?!1:/^[;{}]$/.test(d)&&!/^;/.test(c)}});var n=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;b.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(f,d,c,a){var e=!1;"html"==this.configuration&&(e=a.context?n.test(a.context.tagName):!1);return!e&&("tag"==
f&&/>$/.test(d)&&a.context||/^</.test(c))}});b.defineExtension("commentRange",function(f,d,c){var a=this,e=b.innerMode(a.getMode(),a.getTokenAt(d).state).mode;a.operation(function(){if(f)a.replaceRange(e.commentEnd,c),a.replaceRange(e.commentStart,d),d.line==c.line&&d.ch==c.ch&&a.setCursor(d.line,d.ch+e.commentStart.length);else{var b=a.getRange(d,c),k=b.indexOf(e.commentStart),g=b.lastIndexOf(e.commentEnd);-1<k&&-1<g&&g>k&&(b=b.substr(0,k)+b.substring(k+e.commentStart.length,g)+b.substr(g+e.commentEnd.length));
a.replaceRange(b,d,c)}})});b.defineExtension("autoIndentRange",function(b,d){var c=this;this.operation(function(){for(var a=b.line;a<=d.line;a++)c.indentLine(a,"smart")})});b.defineExtension("autoFormatRange",function(f,d){for(var c=this,a=c.getMode(),e=c.getRange(f,d).split("\n"),p=b.copyState(a,c.getTokenAt(f).state),k=c.getOption("tabSize"),g="",q=0,l=0===f.ch,m=0;m<e.length;++m){for(var h=new b.StringStream(e[m],k);!h.eol();){var r=b.innerMode(a,p),n=a.token(h,p),t=h.current();h.start=h.pos;if(!l||
/\S/.test(t))g+=t,l=!1;!l&&r.mode.newlineAfterToken&&r.mode.newlineAfterToken(n,t,h.string.slice(h.pos)||e[m+1]||"",r.state)&&(g+="\n",l=!0,++q)}!h.pos&&a.blankLine&&a.blankLine(p);!l&&m<e.length-1&&(g+="\n",l=!0,++q)}c.operation(function(){c.replaceRange(g,f,d);for(var a=f.line+1,b=f.line+q;a<=b;++a)c.indentLine(a,"smart");c.setSelection(f,c.getCursor(!1))})})});
